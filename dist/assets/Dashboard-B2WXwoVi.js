const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Tickets-BDw_rsO7.js","assets/index-DFoI8Gyt.js","assets/vendor-react-CqgMBxNQ.js","assets/vendor-radix-DW-K601O.js","assets/vendor-supabase-CegkeNa5.js","assets/vendor-tanstack-DVpCzg3k.js","assets/index-Cu7t3_Rt.css","assets/input-CmXEoJvQ.js","assets/useSLAPolicies-CnVdzz61.js","assets/select-BucmKwq7.js","assets/TicketDetailsDrawer-C1FLI_rY.js","assets/useCurrentProfile-CRnoZ3gy.js","assets/label-B9UwnXR4.js","assets/mapLogToText-Csspg7Oj.js","assets/format-DBRio2gI.js","assets/drawer-CFMVGU0m.js","assets/subDays-Dx0asAth.js","assets/badge-BYTPeF6c.js","assets/useAuth-Zyc7qEp4.js","assets/trash-2-Dprl6oFf.js","assets/card-CCsMzs-c.js","assets/proxy-Cn5sRzkl.js","assets/list-filter-BpFLAluM.js","assets/arrow-up-CnebFzr6.js","assets/ErrorState-dju_jAox.js","assets/export-Bh1yUw2h.js","assets/sla-80_Y3eZ5.js","assets/x-B1LHUZPs.js","assets/AssetManagement-Bad8wXZn.js","assets/alert-dialog-CXGkOgsG.js","assets/schemas-CadPpU1p.js","assets/logSystemAction-DncL9GLF.js","assets/useUsers-Di5pIeGW.js","assets/EmptyState-GtDgzNl5.js","assets/LoadingSkeleton-B9rYdLy6.js"])))=>i.map(i=>d[i]);
import{d as K,M as ae,u as ne,e as le,c as I,f as ce,B as S,_ as G,L as de,H as ue}from"./index-DFoI8Gyt.js";import{r,j as e,u as me}from"./vendor-react-CqgMBxNQ.js";import{S as H,C as fe,H as pe,a as xe}from"./SummaryCard-BVRaCL8X.js";import{S as P,g as he,a as ge,u as ke,A as ye,T as ve,C as je}from"./TicketDetailsDrawer-C1FLI_rY.js";import{E as V,A as W}from"./ErrorState-dju_jAox.js";import{T as we,a as Ce,b as $,c as M,d as be,e as D,h as Te}from"./useCurrentProfile-CRnoZ3gy.js";import{C as Ne,a as Ee,b as Se,c as Re,d as _e}from"./card-CCsMzs-c.js";import{B as O}from"./badge-BYTPeF6c.js";import{i as Z,P as Ae,u as Ie,a as De,L as Pe,m as R}from"./proxy-Cn5sRzkl.js";import{f as re}from"./format-DBRio2gI.js";import{C as He,a as Le}from"./drawer-CFMVGU0m.js";import{S as Oe}from"./switch-B7d-zqfy.js";import{u as Fe}from"./useAuth-Zyc7qEp4.js";import{R as Ue}from"./refresh-cw-QnL5fLSt.js";import"./vendor-radix-DW-K601O.js";import"./vendor-supabase-CegkeNa5.js";import"./vendor-tanstack-DVpCzg3k.js";import"./arrow-up-CnebFzr6.js";import"./input-CmXEoJvQ.js";import"./label-B9UwnXR4.js";import"./select-BucmKwq7.js";import"./mapLogToText-Csspg7Oj.js";import"./subDays-Dx0asAth.js";import"./trash-2-Dprl6oFf.js";/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=K("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=K("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.321.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function X(n,u){if(typeof n=="function")return n(u);n!=null&&(n.current=u)}function Be(...n){return u=>{let o=!1;const a=n.map(l=>{const m=X(l,u);return!o&&typeof m=="function"&&(o=!0),m});if(o)return()=>{for(let l=0;l<a.length;l++){const m=a[l];typeof m=="function"?m():X(n[l],null)}}}}function Ke(...n){return r.useCallback(Be(...n),n)}class Ve extends r.Component{getSnapshotBeforeUpdate(u){const o=this.props.childRef.current;if(o&&u.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const a=o.offsetParent,l=Z(a)&&a.offsetWidth||0,m=Z(a)&&a.offsetHeight||0,c=this.props.sizeRef.current;c.height=o.offsetHeight||0,c.width=o.offsetWidth||0,c.top=o.offsetTop,c.left=o.offsetLeft,c.right=l-c.width-c.left,c.bottom=m-c.height-c.top}return null}componentDidUpdate(){}render(){return this.props.children}}function qe({children:n,isPresent:u,anchorX:o,anchorY:a,root:l,pop:m}){var h;const c=r.useId(),w=r.useRef(null),_=r.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:b}=r.useContext(ae),d=((h=n.props)==null?void 0:h.ref)??(n==null?void 0:n.ref),i=Ke(w,d);return r.useInsertionEffect(()=>{const{width:k,height:v,top:t,left:j,right:T,bottom:y}=_.current;if(u||m===!1||!w.current||!k||!v)return;const g=o==="left"?`left: ${j}`:`right: ${T}`,N=a==="bottom"?`bottom: ${y}`:`top: ${t}`;w.current.dataset.motionPopId=c;const C=document.createElement("style");b&&(C.nonce=b);const s=l??document.head;return s.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${k}px !important;
            height: ${v}px !important;
            ${g}px !important;
            ${N}px !important;
          }
        `),()=>{s.contains(C)&&s.removeChild(C)}},[u]),e.jsx(Ve,{isPresent:u,childRef:w,sizeRef:_,pop:m,children:m===!1?n:r.cloneElement(n,{ref:i})})}const Ye=({children:n,initial:u,isPresent:o,onExitComplete:a,custom:l,presenceAffectsLayout:m,mode:c,anchorX:w,anchorY:_,root:b})=>{const d=ne(Ge),i=r.useId();let h=!0,k=r.useMemo(()=>(h=!1,{id:i,initial:u,isPresent:o,custom:l,onExitComplete:v=>{d.set(v,!0);for(const t of d.values())if(!t)return;a&&a()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[o,d,a]);return m&&h&&(k={...k}),r.useMemo(()=>{d.forEach((v,t)=>d.set(t,!1))},[o]),r.useEffect(()=>{!o&&!d.size&&a&&a()},[o]),n=e.jsx(qe,{pop:c==="popLayout",isPresent:o,anchorX:w,anchorY:_,root:b,children:n}),e.jsx(Ae.Provider,{value:k,children:n})};function Ge(){return new Map}const B=n=>n.key||"";function J(n){const u=[];return r.Children.forEach(n,o=>{r.isValidElement(o)&&u.push(o)}),u}const We=({children:n,custom:u,initial:o=!0,onExitComplete:a,presenceAffectsLayout:l=!0,mode:m="sync",propagate:c=!1,anchorX:w="left",anchorY:_="top",root:b})=>{const[d,i]=Ie(c),h=r.useMemo(()=>J(n),[n]),k=c&&!d?[]:h.map(B),v=r.useRef(!0),t=r.useRef(h),j=ne(()=>new Map),T=r.useRef(new Set),[y,g]=r.useState(h),[N,C]=r.useState(h);De(()=>{v.current=!1,t.current=h;for(let p=0;p<N.length;p++){const x=B(N[p]);k.includes(x)?(j.delete(x),T.current.delete(x)):j.get(x)!==!0&&j.set(x,!1)}},[N,k.length,k.join("-")]);const s=[];if(h!==y){let p=[...h];for(let x=0;x<N.length;x++){const E=N[x],A=B(E);k.includes(A)||(p.splice(x,0,E),s.push(E))}return m==="wait"&&s.length&&(p=s),C(J(p)),g(h),null}const{forceRender:f}=r.useContext(Pe);return e.jsx(e.Fragment,{children:N.map(p=>{const x=B(p),E=c&&!d?!1:h===N||k.includes(x),A=()=>{if(T.current.has(x))return;if(T.current.add(x),j.has(x))j.set(x,!0);else return;let F=!0;j.forEach(L=>{L||(F=!1)}),F&&(f==null||f(),C(t.current),c&&(i==null||i()),a&&a())};return e.jsx(Ye,{isPresent:E,initial:!v.current||o?void 0:!1,custom:u,presenceAffectsLayout:l,mode:m,root:b,onExitComplete:E?void 0:A,anchorX:w,anchorY:_,children:p},x)})})},ee=[5,10,20],te="neturai_recent_tickets_page_size";function Ze({tickets:n,isLoading:u=!1}){const[o,a]=r.useState(1),[l,m]=r.useState(5),[c,w]=r.useState(null),[_,b]=r.useState(null),[d,i]=r.useState(null),{openDrawer:h,ticketId:k}=le(),v=r.useRef({});r.useEffect(()=>{if(!k){b(null);return}i(k)},[k]),r.useEffect(()=>{if(!(typeof window>"u"))try{const s=window.localStorage.getItem(te),f=Number(s);ee.includes(f)&&m(f)}catch{}},[]);const t=[...n].sort((s,f)=>{if(!c)return 0;const{key:p,direction:x}=c,E=s[p],A=f[p];return E==null?1:A==null?-1:typeof E=="string"&&typeof A=="string"?x==="asc"?E.localeCompare(A):A.localeCompare(E):0}),j=s=>{w(f=>({key:s,direction:(f==null?void 0:f.key)===s&&f.direction==="asc"?"desc":"asc"}))},T=s=>(c==null?void 0:c.key)===s?c.direction==="asc"?" â–²":" â–¼":null,y=Math.ceil(t.length/l),g=t.slice((o-1)*l,o*l);r.useEffect(()=>{if(g.length===0){i(null);return}(!d||!g.some(s=>s.id===d))&&i(g[0].id)},[g,d]),r.useEffect(()=>{var s;d&&((s=v.current[d])==null||s.scrollIntoView({block:"nearest"}))},[d]);const N=s=>{_||(b(s),i(s),h(s))},C=s=>{if(!g.length)return;const f=g.findIndex(p=>p.id===d);if(s.key==="ArrowDown"){s.preventDefault();const p=f<0?0:Math.min(f+1,g.length-1);i(g[p].id);return}if(s.key==="ArrowUp"){s.preventDefault();const p=f<0?0:Math.max(f-1,0);i(g[p].id);return}if(s.key==="Home"){s.preventDefault(),i(g[0].id);return}if(s.key==="End"){s.preventDefault(),i(g[g.length-1].id);return}if(s.key==="Enter"||s.key===" "){if(s.preventDefault(),!d)return;N(d)}};return r.useEffect(()=>{if(y===0){o!==1&&a(1);return}o>y&&a(y)},[o,y]),r.useEffect(()=>{a(1)},[l]),r.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(te,String(l))}catch{}},[l]),e.jsx(R.div,{...I(0),children:e.jsxs(Ne,{children:[e.jsxs(Ee,{children:[e.jsx(Se,{children:"Recent Tickets"}),e.jsx(Re,{children:"A list of the most recent IT service desk tickets."})]}),e.jsxs(_e,{children:[e.jsxs(we,{children:[e.jsx(Ce,{children:e.jsxs($,{children:[e.jsxs(M,{onClick:()=>j("title"),children:["Title",T("title")]}),e.jsxs(M,{onClick:()=>j("priority"),children:["Priority",T("priority")]}),e.jsxs(M,{className:"text-center",onClick:()=>j("status"),children:["Status",T("status")]}),e.jsxs(M,{onClick:()=>j("created_at"),children:["Created",T("created_at")]})]})}),e.jsx(be,{tabIndex:0,onKeyDown:C,className:"outline-none focus-visible:ring-2 focus-visible:ring-primary/40",children:u?Array.from({length:5}).map((s,f)=>e.jsxs($,{children:[e.jsx(D,{children:e.jsx(P,{className:"h-4 w-32"})}),e.jsx(D,{children:e.jsx(P,{className:"h-4 w-20"})}),e.jsx(D,{children:e.jsx(P,{className:"h-4 w-20"})}),e.jsx(D,{children:e.jsx(P,{className:"h-4 w-24"})})]},f)):g.length?g.map(s=>{const f=he(s.status),p=ge(s.priority);return e.jsxs($,{ref:x=>{v.current[s.id]=x},tabIndex:-1,"aria-selected":d===s.id,className:ce("cursor-pointer transition-colors hover:bg-muted/60",d===s.id&&"bg-primary/10 ring-1 ring-primary/30",k===s.id&&"bg-muted",_===s.id&&"opacity-60 pointer-events-none"),onMouseEnter:()=>i(s.id),onClick:()=>{N(s.id)},children:[e.jsx(D,{className:"font-medium",children:s.title}),e.jsx(D,{children:e.jsx(O,{variant:p.variant,children:p.label})}),e.jsx(D,{className:"text-center",children:e.jsx(O,{variant:f.variant,children:f.label})}),e.jsx(D,{children:s.created_at?re(new Date(s.created_at),"dd MMM yyyy HH:mm"):"â€”"})]},s.id)}):e.jsx($,{children:e.jsxs(D,{colSpan:4,className:"text-center py-8 text-muted-foreground",children:["ðŸŽ‰ No recent tickets",e.jsx("div",{className:"text-xs mt-1",children:"You're all caught up."})]})})})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Show"}),ee.map(s=>e.jsx(S,{size:"sm",variant:l===s?"default":"outline",onClick:()=>m(s),disabled:u,className:"h-8 px-2",children:s},s))]}),y>1&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:"sm",variant:"outline",disabled:u||o===1,onClick:()=>a(s=>s-1),children:e.jsx(He,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm self-center",children:["Page ",o," / ",y]}),e.jsx(S,{size:"sm",variant:"outline",disabled:u||o===y,onClick:()=>a(s=>s+1),children:e.jsx(Le,{className:"h-4 w-4"})})]})]})]})]})})}function Qe({count:n=8}){const u=[{title:"w-24",value:"w-14",desc:"w-40",trend:"w-20"},{title:"w-28",value:"w-16",desc:"w-36",trend:"w-24"},{title:"w-20",value:"w-12",desc:"w-44",trend:"w-16"},{title:"w-24",value:"w-16",desc:"w-32",trend:"w-24"}];return e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:n}).map((o,a)=>{const l=u[a%u.length];return e.jsxs("div",{className:"h-full min-h-[148px] rounded-xl border border-border/80 bg-card/90 p-6 shadow-sm",children:[e.jsxs("div",{className:"mb-4 flex items-start justify-between",children:[e.jsx(P,{className:`h-3 ${l.title} rounded-sm`}),e.jsx("div",{className:"rounded-md border border-border/70 bg-muted/40 p-1.5",children:e.jsx(P,{className:"h-4 w-4 rounded-sm"})})]}),e.jsxs("div",{className:"flex min-h-[88px] flex-col gap-2",children:[e.jsx(P,{className:`h-8 ${l.value}`}),e.jsx(P,{className:`h-4 ${l.desc}`}),e.jsx("div",{className:"mt-auto",children:e.jsx(P,{className:`h-6 ${l.trend} rounded-md`})})]})]},a)})})}const se="neturai_dashboard_auto_refresh_enabled",Xe=3e4,Ct=()=>{var Y;const n=me(),{role:u,session:o}=Fe(),[a,l]=r.useState(!1),[m,c]=r.useState(!1),w=Te(u,"ticket.manage"),_=((Y=o==null?void 0:o.user)==null?void 0:Y.id)??null,[b,d]=r.useState(!w),i=r.useCallback(()=>{G(()=>import("./Tickets-BDw_rsO7.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))},[]),h=r.useCallback(()=>{G(()=>import("./AssetManagement-Bad8wXZn.js"),__vite__mapDeps([28,1,2,3,4,5,6,29,7,11,30,12,9,31,14,32,17,22,15,18,33,34,25,27,19]))},[]),{useDashboardMetrics:k,useTicketCategories:v}=ke,{data:t,isLoading:j,isError:T,error:y,isFetching:g,dataUpdatedAt:N,refetch:C}=k({userId:_,onlyMy:b}),{data:s,isLoading:f,isError:p,error:x}=v(),E=g,A=N??0,F=A>0?re(new Date(A),"dd MMM yyyy HH:mm:ss"):"â€”",L=(t==null?void 0:t.overdueTicketsCount)??0,U=(t==null?void 0:t.overdueTrendDelta)??0,q=L>0;return r.useEffect(()=>{w||d(!0)},[w]),r.useEffect(()=>{if(!(typeof window>"u"))try{c(window.localStorage.getItem(se)==="true")}catch{}},[]),r.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(se,String(m))}catch{}},[m]),r.useEffect(()=>{if(!m)return;const z=window.setInterval(()=>{C()},Xe);return()=>{window.clearInterval(z)}},[m,C]),r.useEffect(()=>{if(typeof window>"u")return;const z=()=>{i(),h()};if("requestIdleCallback"in window){const oe=window.requestIdleCallback(z,{timeout:1500});return()=>window.cancelIdleCallback(oe)}const ie=window.setTimeout(z,500);return()=>window.clearTimeout(ie)},[h,i]),e.jsxs(R.div,{className:"flex flex-col gap-6 p-4 md:p-6",...I(0),children:[e.jsx(R.div,{className:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between",...I(.05),children:e.jsxs("div",{className:"w-full rounded-xl border border-border/80 bg-gradient-to-b from-card to-card/70 p-5 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(O,{variant:"outline",className:"text-[11px] uppercase tracking-[0.14em]",children:"Operations"}),e.jsx(O,{variant:"secondary",className:"text-[11px]",children:"Live workspace"}),e.jsxs(O,{variant:"outline",className:"text-[11px]",children:["Showing: ",b?"My tickets":"All tickets"]}),e.jsxs(O,{variant:q?"destructive":"secondary",className:"text-[11px]",children:["SLA breached: ",L]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Neturai IT Manager"}),e.jsxs("h1",{className:"text-3xl font-semibold flex items-center gap-2",children:[e.jsx(de,{className:"h-8 w-8"}),"IT Operations Dashboard"]}),e.jsx("p",{className:"text-muted-foreground max-w-3xl",children:"Track ticket throughput, queue pressure, and asset coverage in one operational view."})]})]})}),e.jsxs(R.div,{className:"flex flex-wrap gap-3 rounded-lg border border-border/80 bg-card/70 p-3",...I(.08),children:[e.jsxs(S,{onClick:()=>l(!0),className:"btn-motion-primary flex items-center gap-2",disabled:f||p,children:[e.jsx(Me,{className:"h-4 w-4"})," New Ticket"]}),e.jsxs(S,{onClick:()=>n("/tickets"),onMouseEnter:i,onFocus:i,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4"})," View All Tickets"]}),e.jsxs(S,{onClick:()=>n("/assets/new"),onMouseEnter:h,onFocus:h,variant:"outline",className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"})," Add Asset"]}),w&&e.jsxs("div",{className:"flex h-10 items-center rounded-full border border-border bg-background p-1",children:[e.jsx(S,{type:"button",size:"sm",variant:b?"ghost":"default",className:"h-8 rounded-full px-4",onClick:()=>d(!1),children:"All"}),e.jsx(S,{type:"button",size:"sm",variant:b?"default":"ghost",className:"h-8 rounded-full px-4",onClick:()=>d(!0),children:"My"})]}),e.jsxs("div",{className:"ml-auto flex w-full flex-wrap items-center justify-end gap-2 text-xs text-muted-foreground md:w-auto md:flex-nowrap",children:[e.jsxs("div",{className:"flex items-center gap-2 pr-2",children:[e.jsx("span",{id:"dashboard-auto-refresh-label",className:"text-xs",children:"Auto refresh (30s)"}),e.jsx(Oe,{"aria-labelledby":"dashboard-auto-refresh-label",checked:m,onCheckedChange:c})]}),e.jsxs("span",{children:["Last updated: ",F]}),e.jsxs(S,{variant:"outline",size:"sm",className:"h-8 gap-2",onClick:()=>{C()},disabled:E,children:[e.jsx(Ue,{className:E?"h-4 w-4 animate-spin":"h-4 w-4"}),"Refresh"]})]})]}),p&&e.jsx(R.div,{...I(.085),children:e.jsx(V,{title:"Categories unavailable",message:(x==null?void 0:x.message)||"Unable to load ticket categories right now."})}),e.jsx(We,{initial:!1,children:!T&&q&&e.jsxs(R.div,{initial:{opacity:0,y:-8,scale:.985},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-6,scale:.99},transition:{duration:.22,ease:[.22,1,.36,1]},className:"flex flex-wrap items-center gap-3 rounded-lg border border-red-300/60 bg-red-50/60 px-4 py-3 text-sm text-red-900 dark:border-red-500/40 dark:bg-red-950/20 dark:text-red-200",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs("span",{className:"font-medium",children:["SLA pressure: ",L," breached ticket",L>1?"s":""]}),e.jsx("span",{className:"text-red-700/80 dark:text-red-300/80",children:U>0?`Up ${U} vs yesterday`:U<0?`Down ${Math.abs(U)} vs yesterday`:"No change vs yesterday"}),e.jsx(S,{size:"sm",variant:"outline",className:"ml-auto border-red-300/80 text-red-800 hover:bg-red-100 hover:text-red-900 dark:border-red-500/40 dark:text-red-200 dark:hover:bg-red-900/30",onClick:()=>n("/tickets?sla=breach"),onMouseEnter:i,onFocus:i,children:"Review SLA breach"})]},"overdue-alert")}),e.jsxs(R.div,{className:"flex flex-wrap items-center gap-2 rounded-lg border border-border/70 bg-background/70 p-3",...I(.09),children:[e.jsx("span",{className:"text-xs font-medium uppercase tracking-[0.14em] text-muted-foreground",children:"Quick Filters"}),e.jsxs(S,{size:"sm",variant:"outline",className:"h-8 rounded-full",onClick:()=>n("/tickets?status=open"),onMouseEnter:i,onFocus:i,children:["Open (",(t==null?void 0:t.openTicketsCount)||0,")"]}),e.jsxs(S,{size:"sm",variant:"outline",className:"h-8 rounded-full",onClick:()=>n("/tickets?status=in_progress"),onMouseEnter:i,onFocus:i,children:["In Progress (",(t==null?void 0:t.inProgressTicketsCount)||0,")"]}),e.jsxs(S,{size:"sm",variant:"outline",className:"h-8 rounded-full",onClick:()=>n("/tickets?status=closed"),onMouseEnter:i,onFocus:i,children:["Closed (",(t==null?void 0:t.closedTicketsCount)||0,")"]}),e.jsxs(S,{size:"sm",variant:"outline",className:"h-8 rounded-full text-red-600 hover:text-red-600",onClick:()=>n("/tickets?sla=breach"),onMouseEnter:i,onFocus:i,children:["SLA Breach (",(t==null?void 0:t.overdueTicketsCount)||0,")"]})]}),T?e.jsx(R.div,{...I(.1),children:e.jsx(V,{title:"Metrics unavailable",message:(y==null?void 0:y.message)||"Unable to load dashboard metrics right now."})}):j&&!t?e.jsx(R.div,{...I(.1),children:e.jsx(Qe,{count:8})}):e.jsxs(R.div,{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",...I(.1),children:[e.jsx(H,{index:0,title:"Open Tickets",value:(t==null?void 0:t.openTicketsCount)||0,icon:fe,color:"text-green-500",description:"Tickets awaiting action",trend:{value:(t==null?void 0:t.openTrendDelta)||0,label:"vs yesterday",mode:"increase_is_bad"},onClick:()=>n("/tickets?status=open"),onMouseEnter:i,onFocus:i,clickHint:"Open open-ticket queue"}),e.jsx(H,{index:1,title:"In Progress Tickets",value:(t==null?void 0:t.inProgressTicketsCount)||0,icon:pe,color:"text-yellow-500",description:"Tickets currently being worked on",trend:{value:(t==null?void 0:t.inProgressTrendDelta)||0,label:"vs yesterday",mode:"increase_is_good"},onClick:()=>n("/tickets?status=in_progress"),onMouseEnter:i,onFocus:i,clickHint:"Open in-progress queue"}),e.jsx(H,{index:2,title:"Closed Tickets",value:(t==null?void 0:t.closedTicketsCount)||0,icon:xe,color:"text-red-500",description:"Tickets that have been resolved",trend:{value:(t==null?void 0:t.closedTrendDelta)||0,label:"closed today",mode:"increase_is_good"},onClick:()=>n("/tickets?status=closed"),onMouseEnter:i,onFocus:i,clickHint:"Open resolved tickets"}),e.jsx(H,{index:3,title:"Total Assets",value:(t==null?void 0:t.totalAssets)||0,icon:ue,color:"text-blue-500",description:"All IT assets managed",onClick:()=>n("/assets"),onMouseEnter:h,onFocus:h,clickHint:"Open asset inventory"}),e.jsx(H,{index:4,title:"Tickets Today",value:(t==null?void 0:t.todayTicketsCount)||0,icon:ye,color:"text-indigo-500",description:"New tickets created today",className:"border-indigo-200",trend:{value:(t==null?void 0:t.todayTrendDelta)||0,label:"vs yesterday",mode:"neutral"}}),e.jsx(H,{index:5,title:"SLA Breached",value:(t==null?void 0:t.overdueTicketsCount)||0,icon:W,color:"text-red-500",description:"Open tickets beyond SLA due time",className:"border-red-200",trend:{value:(t==null?void 0:t.overdueTrendDelta)||0,label:"vs yesterday",mode:"increase_is_bad"},onClick:()=>n("/tickets?sla=breach"),onMouseEnter:i,onFocus:i,clickHint:"Review SLA breach tickets"}),e.jsx(H,{index:6,title:"Avg Resolution Time",value:(t==null?void 0:t.avgResolutionHours)!==null&&(t==null?void 0:t.avgResolutionHours)!==void 0?t.avgResolutionHours:"â€”",valueSuffix:"hrs",decimalPlaces:2,icon:ze,color:"text-emerald-500",description:"Average time to resolve tickets"}),e.jsx(H,{index:7,title:"Total Tickets",value:(t==null?void 0:t.totalTickets)||0,icon:Q,description:"All tickets in the system"})]}),T?e.jsx(R.div,{...I(.18),children:e.jsx(V,{title:"Recent tickets unavailable",message:(y==null?void 0:y.message)||"Unable to load recent tickets right now."})}):e.jsx(R.div,{...I(.18),children:e.jsx(Ze,{tickets:(t==null?void 0:t.recentTickets)||[],isLoading:j})}),s&&e.jsx(ve,{categories:s}),a&&e.jsx(je,{isOpen:a,onClose:()=>l(!1),categories:s||[]})]})};export{Ct as default};
