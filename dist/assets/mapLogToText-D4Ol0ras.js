import{u,b as a,c}from"./vendor-tanstack-CEPwOq2U.js";import{s as o,f as d}from"./index-W22mHG5Q.js";async function f(){const{data:e,error:t}=await o.from("settings").select("*");if(t)throw new Error(t.message);return e}async function g(e){const{key:t,value:r}=e;if(!t||r===void 0)throw new Error("Setting key and value are required for update.");const{data:n,error:i}=await o.from("settings").upsert({key:t,value:r,updated_at:new Date().toISOString()}).select().single();if(i)throw new Error(i.message);return n}function y(){return u({queryKey:["settings"],queryFn:f})}function k(){const e=a();return c({mutationFn:g,onSuccess:()=>{e.invalidateQueries({queryKey:["settings"]})}})}function s(e){if(!e)return"—";const t=new Date(e);return isNaN(t.getTime())?e:d(t,"dd MMM yyyy HH:mm")}function w(e,t){if(!t)return{title:e};const r=n=>typeof n=="string"?n:void 0;switch(e){case"ticket.created":return{title:"Ticket created",description:[r(t.title)&&`Title: ${t.title}`,r(t.priority)&&`Priority: ${t.priority}`].filter(Boolean).join(`
`)};case"ticket.status_changed":return{title:"Status changed",description:`from "${r(t.from)??"—"}" → "${r(t.to)??"—"}"`};case"ticket.assigned":return{title:"Ticket assigned",description:`Assigned to ${r(t.to)??"—"}`};case"ticket.unassigned":return{title:"Ticket unassigned"};case"ticket.due_date_changed":return{title:"Due date changed",description:`from "${s(r(t.from))}" → "${s(r(t.to))}"`};case"ticket.updated":return{title:"Ticket updated",description:r(t.source)?`Source: ${t.source}`:void 0};default:return{title:e}}}export{k as a,w as m,y as u};
